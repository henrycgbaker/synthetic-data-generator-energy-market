# Scenario 1: Gas Crisis
# Models a temporary spike in gas prices with minor coal correlation

start_ts: "2024-01-01 00:00"
days: 365
freq: "h"
seed: 42

price_grid: [-100, -50, 0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100, 120, 150, 200, 300, 500, 1000]

# Demand curve: Standard inverse demand P = intercept + slope * Q
demand:
  inelastic: false
  base_intercept: 200.0   # Choke price when q=0($/MWh)
  slope: -0.006           # dP/dQ ($/MW)
  daily_seasonality: true
  day_peak_hour: 14
  day_amp: 0.25          # Â±25% daily variation
  weekend_drop: 0.10     # 10% lower on weekends
  annual_seasonality: true
  winter_amp: 0.15       # +15% in winter
  summer_amp: -0.10      # -10% in summer

# Planned outages during summer -> affect thermal & nuclear techs' availability -> affect supply
planned_outages:
  enabled: true
  months: [5, 6, 7, 8, 9]
  nuclear_reduction: 0.12 # these are all arbitrary (but supposedly realistic according to LLM - plug in numbers you actually want)
  coal_reduction: 0.10
  gas_reduction: 0.08

# Renewable availability via weather simulation 
# "weather_simulation" -> affects availability of wind and solar via specified weather models; 
# as opposed to direct sampling from distributions
renewable_availability_mode: "weather_simulation" # for direct sampling, remove this line -> directly set `avail.wind` distribution (below)
weather_simulation:
  wind: # @TODO this isn't properly implemented, there's no meaningful diff between this path vs sampling from dist??? (low priority)
    model: "ar1"
    params:
      base_capacity_factor: 0.8 # avg capacity factor of wind techs
      persistence: 0.85
      volatility: 0.15
  solar:
    model: "sinusoidal"
    params:
      sunrise_hour: 6
      sunset_hour: 20
      peak_capacity_factor: 0.35

# supply regime planner model
supply_regime_planner:
  mode: "local_only" # options: "local_only", "global", "hybrid"

variables:
  # === FUEL PRICES - 3 regimes ===
  fuel.gas:
    regimes:
      - name: "pre-crisis"
        dist: {kind: "normal", mu: 30.0, sigma: 5.0, bounds: {low: 10.0, high: 100.0}}
        breakpoints:
          - date: "2024-01-01"
            transition_hours: 48
      - name: "crisis"
        dist: {kind: "normal", mu: 85.0, sigma: 15.0, bounds: {low: 40.0, high: 150.0}}
        breakpoints:
          - date: "2024-05-01"
            transition_hours: 168  # Week-long transition
      - name: "post_crisis"
        dist: {kind: "normal", mu: 35.0, sigma: 6.0, bounds: {low: 15.0, high: 100.0}}
        breakpoints:
          - date: "2024-09-01"
            transition_hours: 168

  fuel.coal:
    regimes:
      - name: "normal"
        dist: {kind: "normal", mu: 25.0, sigma: 3.0, bounds: {low: 15.0, high: 60.0}}
        breakpoints:
          - date: "2024-01-01"
            transition_hours: 48
      - name: "elevated"
        dist: {kind: "normal", mu: 35.0, sigma: 5.0, bounds: {low: 20.0, high: 70.0}}
        breakpoints:
          - date: "2024-05-01"
            transition_hours: 168
      - name: "post_crisis"
        dist: {kind: "normal", mu: 27.0, sigma: 3.5, bounds: {low: 15.0, high: 60.0}}
        breakpoints:
          - date: "2024-09-01"
            transition_hours: 168

  # === CAPACITIES (MW) - all held to be constant across regimes ===
  cap.nuclear:
    regimes:
      - name: "constant"
        dist: {kind: "const", v: 6000.0} 

  cap.coal:
    regimes:
      - name: "constant"
        dist: {kind: "const", v: 8000.0} 

  cap.gas:
    regimes:
      - name: "constant"
        dist: {kind: "const", v: 12000.0} 

  cap.wind:
    regimes:
      - name: "constant"
        dist: {kind: "const", v: 7000.0} 

  cap.solar:
    regimes:
      - name: "constant"
        dist: {kind: "const", v: 5000.0} 

  # === AVAILABILITIES === (modelled as r.vs with 1 regime)
  # NB not incl solar & wind here, as they are modeled by weather simulation above 
  # === AVAILABILITIES === (modelled as r.vs with 1 regime)
  # NB not incl solar & wind here, as they are modeled by weather simulation above 
  avail.nuclear:
    regimes:
      - name: "baseline"
        dist: {kind: "beta", alpha: 30, beta: 2, low: 0.90, high: 0.98}

  avail.coal:
    regimes:
      - name: "baseline"
        dist: {kind: "beta", alpha: 25, beta: 3, low: 0.85, high: 0.95}

  avail.gas:
    regimes:
      - name: "baseline"
        dist: {kind: "beta", alpha: 28, beta: 2, low: 0.90, high: 0.98}

  # === THERMAL EFFICIENCIES ===
  eta_lb.coal:
    regimes:
      - name: "baseline"
        dist: {kind: "const", v: 0.33}

  eta_ub.coal:
    regimes:
      - name: "baseline"
        dist: {kind: "const", v: 0.38}

  eta_lb.gas:
    regimes:
      - name: "baseline"
        dist: {kind: "const", v: 0.48}

  eta_ub.gas:
    regimes:
      - name: "baseline"
        dist: {kind: "const", v: 0.55}

  # === BID RANGES for renewables/nuclear ===
  # NB needs to have a max-min so that it can build a negatively sloping supply surve for each tech
  # max is just the price at which they are fully dispatched (?) @TODO check this
  # min is the price at which they start to be dispatched; below this price, qty supplied = 0
  # these are held consistent across regimes
  # NB needs to have a max-min so that it can build a negatively sloping supply surve for each tech
  # max is just the price at which they are fully dispatched (?) @TODO check this
  # min is the price at which they start to be dispatched; below this price, qty supplied = 0
  # these are held consistent across regimes
  bid.nuclear.min:
    regimes:
      - name: "baseline"
        dist: {kind: "const", v: -200.0}

  bid.nuclear.max:
    regimes:
      - name: "baseline"
        dist: {kind: "const", v: -50.0}

  bid.wind.min:
    regimes:
      - name: "baseline"
        dist: {kind: "const", v: -200.0}

  bid.wind.max:
    regimes:
      - name: "baseline"
        dist: {kind: "const", v: -50.0}

  bid.solar.min:
    regimes:
      - name: "baseline"
        dist: {kind: "const", v: -200.0}

  bid.solar.max:
    regimes:
      - name: "baseline"
        dist: {kind: "const", v: -50.0}

# here can upload empirical time series data to override sampled data
empirical_series: {}

# saving configs
io:
  out_dir: "outputs"
  dataset_name: "gas_crisis_scenario"
  add_timestamp: true
  version: "v1"
  save_pickle: true
  save_csv: true
  save_meta: true
