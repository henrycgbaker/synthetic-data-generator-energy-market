# Scenario 2: Coal Phase-Out with Linear Capacity Changes
# Coal capacity declines linearly to zero
# Renewable & gas capacity increases linearly to compensate

start_ts: "2024-01-01 00:00"
days: 1825  # 5 years
freq: "h"
seed: 42

price_grid: [-1000, -500, -100, -50, 0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100, 120, 150, 200, 300, 500, 1000]

demand:
  inelastic: false
  base_intercept: 200.0
  slope: -0.006
  day_peak_hour: 14
  day_amp: 0.25
  weekend_drop: 0.10
  annual_seasonality: true
  winter_amp: 0.15
  summer_amp: -0.10

planned_outages:
  enabled: true
  months: [5, 6, 7, 8, 9]
  nuclear_reduction: 0.12
  coal_reduction: 0.15
  gas_reduction: 0.08

renewable_availability_mode: "weather_simulation"
weather_simulation:
  wind:
    model: "ar1"
    params:
      base_capacity_factor: 0.45
      persistence: 0.85
      volatility: 0.15
  solar:
    model: "sinusoidal"
    params:
      sunrise_hour: 6
      sunset_hour: 20
      peak_capacity_factor: 0.35

supply_regime_planner:
  mode: "local_only"

variables:
  # === FUEL PRICES - stable ===
  fuel.gas:
    regimes:
      - name: "stable"
        dist: {kind: "normal", mu: 32.0, sigma: 5.0, bounds: {low: 15.0, high: 80.0}}
  
  fuel.coal:
    regimes:
      - name: "stable"
        dist: {kind: "normal", mu: 26.0, sigma: 3.0, bounds: {low: 15.0, high: 60.0}}
  
  # === CAPACITIES - Multi-stage linear transitions ===
  cap.nuclear:
    regimes:
      - name: "constant"
        dist: {kind: "const", v: 6000.0}
  
  # Coal: 5 stages with linear decline in each
  # Year 1: 8000→7000 MW (slope = -1000/(365*24) = -0.114 MW/hr)
  # Year 2: 7000→5000 MW (slope = -2000/(365*24) = -0.228 MW/hr - faster decline)
  # Year 3: 5000→3000 MW (slope = -2000/(365*24) = -0.228 MW/hr)
  # Year 4: 3000→1000 MW (slope = -2000/(365*24) = -0.228 MW/hr)
  # Year 5: 1000→0 MW (slope = -1000/(365*24) = -0.114 MW/hr)
  cap.coal:
    regimes:
      - name: "stage1"
        dist: {kind: "linear", start: 8000.0, slope: -0.114, bounds: {low: 0.0, high: 8000.0}}
        breakpoints:
          - {date: "2024-01-01", transition_hours: 168}
      - name: "stage2"
        dist: {kind: "linear", start: 7000.0, slope: -0.228, bounds: {low: 0.0, high: 8000.0}}
        breakpoints:
          - {date: "2025-01-01", transition_hours: 168}
      - name: "stage3"
        dist: {kind: "linear", start: 5000.0, slope: -0.228, bounds: {low: 0.0, high: 8000.0}}
        breakpoints:
          - {date: "2026-01-01", transition_hours: 168}
      - name: "stage4"
        dist: {kind: "linear", start: 3000.0, slope: -0.228, bounds: {low: 0.0, high: 8000.0}}
        breakpoints:
          - {date: "2027-01-01", transition_hours: 168}
      - name: "stage5"
        dist: {kind: "linear", start: 1000.0, slope: -0.114, bounds: {low: 0.0, high: 8000.0}}
        breakpoints:
          - {date: "2028-01-01", transition_hours: 168}
  
  # Gas: 5 stages with linear increase in each
  # Each year adds ~1200 MW linearly (slope = 1200/(365*24) = 0.137 MW/hr)
  cap.gas:
    regimes:
      - name: "stage1"
        dist: {kind: "linear", start: 12000.0, slope: 0.137, bounds: {low: 12000.0, high: 20000.0}}
        breakpoints:
          - {date: "2024-01-01", transition_hours: 168}
      - name: "stage2"
        dist: {kind: "linear", start: 13200.0, slope: 0.137, bounds: {low: 12000.0, high: 20000.0}}
        breakpoints:
          - {date: "2025-01-01", transition_hours: 168}
      - name: "stage3"
        dist: {kind: "linear", start: 14400.0, slope: 0.137, bounds: {low: 12000.0, high: 20000.0}}
        breakpoints:
          - {date: "2026-01-01", transition_hours: 168}
      - name: "stage4"
        dist: {kind: "linear", start: 15600.0, slope: 0.137, bounds: {low: 12000.0, high: 20000.0}}
        breakpoints:
          - {date: "2027-01-01", transition_hours: 168}
      - name: "stage5"
        dist: {kind: "linear", start: 16800.0, slope: 0.137, bounds: {low: 12000.0, high: 20000.0}}
        breakpoints:
          - {date: "2028-01-01", transition_hours: 168}
  
  # Wind: 3 stages with accelerating buildout
  # Year 1-2: Slow (7000→8000, slope=0.114)
  # Year 3-4: Medium (8000→10000, slope=0.228)  
  # Year 5: Fast (10000→12000, slope=0.228)
  cap.wind:
    regimes:
      - name: "early"
        dist: {kind: "linear", start: 7000.0, slope: 0.057, bounds: {low: 7000.0, high: 13000.0}}
        breakpoints:
          - {date: "2024-01-01", transition_hours: 336}
      - name: "mid"
        dist: {kind: "linear", start: 8000.0, slope: 0.114, bounds: {low: 7000.0, high: 13000.0}}
        breakpoints:
          - {date: "2026-01-01", transition_hours: 336}
      - name: "late"
        dist: {kind: "linear", start: 10000.0, slope: 0.228, bounds: {low: 7000.0, high: 13000.0}}
        breakpoints:
          - {date: "2028-01-01", transition_hours: 336}
  
  # Solar: 3 stages similar to wind
  cap.solar:
    regimes:
      - name: "early"
        dist: {kind: "linear", start: 5000.0, slope: 0.057, bounds: {low: 5000.0, high: 11000.0}}
        breakpoints:
          - {date: "2024-01-01", transition_hours: 336}
      - name: "mid"
        dist: {kind: "linear", start: 6000.0, slope: 0.114, bounds: {low: 5000.0, high: 11000.0}}
        breakpoints:
          - {date: "2026-01-01", transition_hours: 336}
      - name: "late"
        dist: {kind: "linear", start: 8000.0, slope: 0.228, bounds: {low: 5000.0, high: 11000.0}}
        breakpoints:
          - {date: "2028-01-01", transition_hours: 336}
  
  # === AVAILABILITIES ===
  # modelled as r.vs with 1 regime
  # NB not incl solar & wind here, as they are modeled by weather simulation above
  avail.nuclear:
    regimes:
      - name: "baseline"
        dist: {kind: "beta", alpha: 30, beta: 2, low: 0.90, high: 0.98}
  
  # Coal availability decreases as plants age before retirement
  # this here is a single distribution, but it's a prop of the avail regime which is decreasing linearly
  avail.coal:
    regimes:
      - name: "degrading"
        dist: {kind: "beta", alpha: 20, beta: 4, low: 0.75, high: 0.92}
  
  avail.gas:
    regimes:
      - name: "baseline"
        dist: {kind: "beta", alpha: 28, beta: 2, low: 0.90, high: 0.98}
  
  # === THERMAL EFFICIENCIES ===
  # all constants
  eta_lb.coal:
    regimes:
      - name: "baseline"
        dist: {kind: "const", v: 0.33}
  
  eta_ub.coal:
    regimes:
      - name: "baseline"
        dist: {kind: "const", v: 0.38}
  
  eta_lb.gas:
    regimes:
      - name: "baseline"
        dist: {kind: "const", v: 0.48}
  
  eta_ub.gas:
    regimes:
      - name: "baseline"
        dist: {kind: "const", v: 0.55}
  
  # === BID RANGES ===
  bid.nuclear.min:
    regimes:
      - name: "baseline"
        dist: {kind: "const", v: -200.0}
  
  bid.nuclear.max:
    regimes:
      - name: "baseline"
        dist: {kind: "const", v: -50.0}
  
  bid.wind.min:
    regimes:
      - name: "baseline"
        dist: {kind: "const", v: -200.0}
  
  bid.wind.max:
    regimes:
      - name: "baseline"
        dist: {kind: "const", v: -50.0}
  
  bid.solar.min:
    regimes:
      - name: "baseline"
        dist: {kind: "const", v: -200.0}
  
  bid.solar.max:
    regimes:
      - name: "baseline"
        dist: {kind: "const", v: -50.0}

empirical_series: {}

io:
  out_dir: "outputs"
  dataset_name: "coal_phaseout_scenario"
  add_timestamp: true
  version: "v1"
  save_pickle: true
  save_csv: true
  save_meta: true
